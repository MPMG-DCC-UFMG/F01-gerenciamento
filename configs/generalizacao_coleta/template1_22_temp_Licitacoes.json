{
  "source_name": "[Realiza\u00e7\u00e3o-F01] Coleta de <TAG> de <NOME_MUNICIPIO>",
  "base_url": "<URL_BASE><PARAM_URL>",
  "obey_robots": false,
  "data_path": "/datalake/ufmg/webcrawlerc01/realizacaof01/<MUNICIPIO_PATH>/licitacoes",
  "request_type": "GET",
  "form_request_type": "POST",
  "antiblock_download_delay": 2,
  "antiblock_autothrottle_enabled": false,
  "antiblock_autothrottle_start_delay": 2,
  "antiblock_autothrottle_max_delay": 10,
  "antiblock_ip_rotation_enabled": false,
  "antiblock_ip_rotation_type": "tor",
  "antiblock_max_reqs_per_ip": 10,
  "antiblock_max_reuse_rounds": 10,
  "antiblock_proxy_list": "",
  "antiblock_user_agent_rotation_enabled": false,
  "antiblock_reqs_per_user_agent": 100,
  "antiblock_user_agents_list": "",
  "antiblock_insert_cookies_enabled": false,
  "antiblock_cookies_list": "",
  "captcha": "none",
  "has_webdriver": false,
  "webdriver_path": "",
  "img_xpath": "",
  "sound_xpath": "",
  "dynamic_processing": true,
  "skip_iter_errors": false,
  "explore_links": false,
  "link_extractor_max_depth": null,
  "link_extractor_allow_url": "",
  "link_extractor_allow_domains": "",
  "link_extractor_tags": "",
  "link_extractor_attrs": "",
  "link_extractor_check_type": false,
  "link_extractor_process_value": "",
  "download_files": false,
  "download_files_allow_url": "",
  "download_files_allow_extensions": "",
  "download_files_allow_domains": "",
  "download_files_tags": "",
  "download_files_attrs": "",
  "download_files_process_value": "",
  "download_files_check_large_content": true,
  "download_imgs": false,
  "steps": "{\"step\":\"root\",\"depth\":0,\"children\":[{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"screenshot\",\"depth\":1,\"arguments\":{}},{\"step\":\"clique\",\"depth\":1,\"arguments\":{\"elemento\":\"\\\"//a[span[normalize-space()='Licita\u00e7\u00f5es']]\\\"\"}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"screenshot\",\"depth\":1,\"arguments\":{}},{\"step\":\"clique\",\"depth\":1,\"arguments\":{\"elemento\":\"\\\"//a[span[b='Licita\u00e7\u00e3o']]\\\"\"}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"8\"}},{\"step\":\"screenshot\",\"depth\":1,\"arguments\":{}},{\"step\":\"para_cada\",\"depth\":1,\"iterator\":\"ano\",\"children\":[{\"step\":\"digite\",\"depth\":2,\"arguments\":{\"xpath\":\"\\\"/html/body/div[4]/div/div/div/div/form/div/div/div/div[2]/div/input[1]\\\"\",\"texto\":\"f\\\"01/01/{ano}\\\"\"}},{\"step\":\"espere\",\"depth\":2,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"digite\",\"depth\":2,\"arguments\":{\"xpath\":\"\\\"/html/body/div[4]/div/div/div/div/form/div/div/div/div[2]/div/input[2]\\\"\",\"texto\":\"f\\\"31/12/{ano}\\\"\"}},{\"step\":\"espere\",\"depth\":2,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"clique\",\"depth\":2,\"arguments\":{\"elemento\":\"\\\"//button[@id='form-filtro:btnPesquisar']\\\"\"}},{\"step\":\"espere\",\"depth\":2,\"arguments\":{\"segundos\":\"6\"}},{\"step\":\"selecione\",\"depth\":2,\"arguments\":{\"xpath\":\"\\\"/html/body/div[4]/div/div/div/div/form/table/tbody/tr[1]/td/div/div[2]/select\\\"\",\"opcao\":\"\\\"50\\\"\"}},{\"step\":\"espere\",\"depth\":2,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"atribuicao\",\"depth\":2,\"target\":\"num_paginas\",\"source\":{\"call\":{\"step\":\"objeto\",\"arguments\":{\"objeto\":\"\\\"0\\\"\"}}}},{\"step\":\"se\",\"depth\":2,\"children\":[{\"step\":\"atribuicao\",\"depth\":3,\"target\":\"num_paginas\",\"source\":{\"call\":{\"step\":\"extrai_texto\",\"arguments\":{\"xpath\":\"\\\"//div[@id='form-filtro:data-table_paginator_bottom']/span[@class='ui-paginator-current']\\\"\"}}}},{\"step\":\"atribuicao\",\"depth\":3,\"target\":\"num_paginas\",\"source\":{\"call\":{\"step\":\"objeto\",\"arguments\":{\"objeto\":\"num_paginas.split()[3][:-1]\"}}}},{\"step\":\"imprime\",\"depth\":3,\"arguments\":{\"texto\":\"f\\\"Coletando dados de {ano}\\\"\"}},{\"step\":\"imprime\",\"depth\":3,\"arguments\":{\"texto\":\"\\\"N\u00famero de p\u00e1ginas: \\\" + num_paginas\"}},{\"step\":\"para_cada\",\"depth\":3,\"iterator\":\"pagina\",\"children\":[{\"step\":\"clique\",\"depth\":4,\"arguments\":{\"elemento\":\"f\\\"/html/body/div[4]/div/div/div/div/form/table/tbody/tr[1]/td/div/div[2]/span[2]/a[text()='{pagina}']\\\"\"}},{\"step\":\"espere\",\"depth\":4,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"screenshot\",\"depth\":4,\"arguments\":{}},{\"step\":\"clique\",\"depth\":4,\"arguments\":{\"elemento\":\"\\\"//a[@title='Exportar para csv']\\\"\"}},{\"step\":\"espere\",\"depth\":4,\"arguments\":{\"segundos\":\"2\"}},{\"step\":\"imprime\",\"depth\":4,\"arguments\":{\"texto\":\"f\\\"- Baxando arquivo csv da p\u00e1gina {pagina}\\\"\"}},{\"step\":\"para_cada\",\"depth\":4,\"iterator\":\"licitacao\",\"children\":[{\"step\":\"clique\",\"depth\":5,\"arguments\":{\"elemento\":\"licitacao\"}},{\"step\":\"espere\",\"depth\":5,\"arguments\":{\"segundos\":\"1\"}},{\"step\":\"atribuicao\",\"depth\":5,\"target\":\"processo\",\"source\":{\"call\":{\"step\":\"extrai_texto\",\"arguments\":{\"xpath\":\"\\\"/html/body/div[11]/div[2]/form/div/div/div[1]/table[2]/tbody/tr[2]/td[1]\\\"\"}}}},{\"step\":\"salva_pagina\",\"depth\":5,\"arguments\":{}},{\"step\":\"imprime\",\"depth\":5,\"arguments\":{\"texto\":\"f\\\"-- Salvando dados do processo {processo}\\\"\"}},{\"step\":\"se\",\"depth\":5,\"children\":[{\"step\":\"clique\",\"depth\":6,\"arguments\":{\"elemento\":\"\\\"//div[@id='formVisualizar:tabLicitacao']/ul/li/a[text()='Documentos']\\\"\"}},{\"step\":\"espere\",\"depth\":6,\"arguments\":{\"segundos\":\"1\"}},{\"step\":\"para_cada\",\"depth\":6,\"iterator\":\"documento\",\"children\":[{\"step\":\"clique\",\"depth\":7,\"arguments\":{\"elemento\":\"documento\"}},{\"step\":\"espere\",\"depth\":7,\"arguments\":{\"segundos\":\"2\"}},{\"step\":\"imprime\",\"depth\":7,\"arguments\":{\"texto\":\"f\\\"--- Baixando documento do processo {processo}\\\"\"}}],\"iterable\":{\"call\":{\"step\":\"localiza_elementos\",\"arguments\":{\"xpath\":\"\\\"(//button[@title='Baixar conte\u00fado'])[*]\\\"\"}}}}],\"condition\":{\"call\":{\"step\":\"elemento_existe_na_pagina\",\"arguments\":{\"xpath\":\"\\\"//div[@id='formVisualizar:tabLicitacao']/ul/li/a[text()='Documentos']\\\"\"}}}},{\"step\":\"clique\",\"depth\":5,\"arguments\":{\"elemento\":\"\\\"/html/body/div[11]/div[1]/a\\\"\"}},{\"step\":\"espere\",\"depth\":5,\"arguments\":{\"segundos\":\"2\"}}],\"iterable\":{\"call\":{\"step\":\"localiza_elementos\",\"arguments\":{\"xpath\":\"\\\"/html/body/div[4]/div/div/div/div/form/table/tbody/tr[1]/td/div/div[1]/table/tbody/tr[*]/td[1]\\\"\"}}}}],\"iterable\":{\"call\":{\"step\":\"objeto\",\"arguments\":{\"objeto\":\"[i for i in range(1, int(num_paginas)+1)]\"}}}}],\"condition\":{\"call\":{\"step\":\"elemento_existe_na_pagina\",\"arguments\":{\"xpath\":\"\\\"//div[@id='form-filtro:data-table_paginator_bottom']/span[@class='ui-paginator-current']\\\"\"}}}}],\"iterable\":{\"call\":{\"step\":\"objeto\",\"arguments\":{\"objeto\":\"[n for n in range(2015,2022)]\"}}}}]}",
  "encoding_detection_method": 1,
  "expected_runtime_category": "fast",
  "templated_url_parameter_handlers": [],
  "static_form_parameter_handlers": [],
  "templated_url_response_handlers": [],
  "static_form_response_handlers": [],
  "crawler_id": 368,
  "instance_id": "166085002103637"
}

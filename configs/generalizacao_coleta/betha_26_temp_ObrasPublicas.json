{
  "source_name": "[Realiza\u00e7\u00e3o-F01] Coleta de <TAG> de <NOME_MUNICIPIO>",
  "base_url": "<URL_BASE><PARAM_URL>",
  "obey_robots": false,
  "data_path": "/datalake/ufmg/webcrawlerc01/realizacaof01/<MUNICIPIO_PATH>/obras_publicas",
  "request_type": "GET",
  "form_request_type": "POST",
  "antiblock_download_delay": 2,
  "antiblock_autothrottle_enabled": false,
  "antiblock_autothrottle_start_delay": 2,
  "antiblock_autothrottle_max_delay": 10,
  "antiblock_ip_rotation_enabled": false,
  "antiblock_ip_rotation_type": "tor",
  "antiblock_max_reqs_per_ip": 10,
  "antiblock_max_reuse_rounds": 10,
  "antiblock_proxy_list": "",
  "antiblock_user_agent_rotation_enabled": false,
  "antiblock_reqs_per_user_agent": 100,
  "antiblock_user_agents_list": "",
  "antiblock_insert_cookies_enabled": false,
  "antiblock_cookies_list": "",
  "captcha": "none",
  "has_webdriver": false,
  "webdriver_path": "",
  "img_xpath": "",
  "sound_xpath": "",
  "dynamic_processing": true,
  "skip_iter_errors": false,
  "explore_links": false,
  "link_extractor_max_depth": null,
  "link_extractor_allow_url": "",
  "link_extractor_allow_domains": "",
  "link_extractor_tags": "",
  "link_extractor_attrs": "",
  "link_extractor_check_type": false,
  "link_extractor_process_value": "",
  "download_files": false,
  "download_files_allow_url": "",
  "download_files_allow_extensions": "",
  "download_files_allow_domains": "",
  "download_files_tags": "",
  "download_files_attrs": "",
  "download_files_process_value": "",
  "download_files_check_large_content": true,
  "download_imgs": false,
  "steps": "{\"step\":\"root\",\"depth\":0,\"children\":[{\"step\":\"atribuicao\",\"depth\":1,\"target\":\"num_paginas\",\"source\":{\"call\":{\"step\":\"objeto\",\"arguments\":{\"objeto\":\"\\\"1\\\"\"}}}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"screenshot\",\"depth\":1,\"arguments\":{}},{\"step\":\"clique\",\"depth\":1,\"arguments\":{\"elemento\":\"\\\"//a[text()='Consulta de obras']\\\"\"}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"screenshot\",\"depth\":1,\"arguments\":{}},{\"step\":\"clique\",\"depth\":1,\"arguments\":{\"elemento\":\"\\\"//input[@id='mainForm:consultar']\\\"\"}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"6\"}},{\"step\":\"atribuicao\",\"depth\":1,\"target\":\"mais_paginas\",\"source\":{\"call\":{\"step\":\"elemento_existe_na_pagina\",\"arguments\":{\"xpath\":\"\\\"//div[@class='navButtons']/div/a[last()-2]\\\"\"}}}},{\"step\":\"se\",\"depth\":1,\"children\":[{\"step\":\"atribuicao\",\"depth\":2,\"target\":\"num_paginas\",\"source\":{\"call\":{\"step\":\"extrai_texto\",\"arguments\":{\"xpath\":\"\\\"//div[@class='navButtons']/div/a[last()-2]\\\"\"}}}}],\"condition\":{\"call\":{\"step\":\"objeto\",\"arguments\":{\"objeto\":\"mais_paginas\"}}}},{\"step\":\"imprime\",\"depth\":1,\"arguments\":{\"texto\":\"\\\"N\u00famero de p\u00e1ginas: \\\" + num_paginas\"}},{\"step\":\"clique\",\"depth\":1,\"arguments\":{\"elemento\":\"\\\"//input[@id='btn_export_0']\\\"\"}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"2\"}},{\"step\":\"clique\",\"depth\":1,\"arguments\":{\"elemento\":\"\\\"//input[@id='mainForm:exportType:3']\\\"\"}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"1\"}},{\"step\":\"clique\",\"depth\":1,\"arguments\":{\"elemento\":\"\\\"//input[@title='Exportar consulta para o tipo de arquivo selecionado']\\\"\"}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"6\"}},{\"step\":\"clique\",\"depth\":1,\"arguments\":{\"elemento\":\"\\\"//a[text()='download']\\\"\"}},{\"step\":\"espere\",\"depth\":1,\"arguments\":{\"segundos\":\"4\"}},{\"step\":\"para_cada\",\"depth\":1,\"iterator\":\"pagina\",\"children\":[{\"step\":\"se\",\"depth\":2,\"children\":[{\"step\":\"clique\",\"depth\":3,\"arguments\":{\"elemento\":\"f\\\"//div[@class='navButtons']/div/a[text()='{pagina}']\\\"\"}},{\"step\":\"espere\",\"depth\":3,\"arguments\":{\"segundos\":\"4\"}}],\"condition\":{\"call\":{\"step\":\"objeto\",\"arguments\":{\"objeto\":\"mais_paginas\"}}}},{\"step\":\"screenshot\",\"depth\":2,\"arguments\":{}},{\"step\":\"salva_pagina\",\"depth\":2,\"arguments\":{}},{\"step\":\"para_cada\",\"depth\":2,\"iterator\":\"obra\",\"children\":[{\"step\":\"clique\",\"depth\":3,\"arguments\":{\"elemento\":\"obra\"}},{\"step\":\"espere\",\"depth\":3,\"arguments\":{\"segundos\":\"2\"}},{\"step\":\"salva_pagina\",\"depth\":3,\"arguments\":{}},{\"step\":\"atribuicao\",\"depth\":3,\"target\":\"contrato\",\"source\":{\"call\":{\"step\":\"extrai_texto\",\"arguments\":{\"xpath\":\"\\\"/html/body/div[1]/div[1]/div/div/div/form/div[1]/div[1]/div[2]/div/div[3]/table/tbody/tr/td[1]\\\"\"}}}},{\"step\":\"imprime\",\"depth\":3,\"arguments\":{\"texto\":\"f\\\"Coletando dados da obra de contrato {contrato} \\\"\"}},{\"step\":\"clique\",\"depth\":3,\"arguments\":{\"elemento\":\"\\\"/html/body/div[1]/div[1]/div/div/div/form/div[1]/div[1]/div[2]/div/table/tbody/tr[2]/td/a\\\"\"}},{\"step\":\"espere\",\"depth\":3,\"arguments\":{\"segundos\":\"2\"}}],\"iterable\":{\"call\":{\"step\":\"localiza_elementos\",\"arguments\":{\"xpath\":\"\\\"//tr[*]/td[last()]/a\\\"\"}}}}],\"iterable\":{\"call\":{\"step\":\"objeto\",\"arguments\":{\"objeto\":\"[i for i in range(1,int(num_paginas)+1)]\"}}}}]}",
  "encoding_detection_method": 1,
  "expected_runtime_category": "fast",
  "templated_url_parameter_handlers": [],
  "static_form_parameter_handlers": [],
  "templated_url_response_handlers": [],
  "static_form_response_handlers": [],
  "crawler_id": 315,
  "instance_id": "165520737627352"
}
